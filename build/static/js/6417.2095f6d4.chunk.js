"use strict";(self.webpackChunkkennekt_front_end_client=self.webpackChunkkennekt_front_end_client||[]).push([[6417],{56641:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var r=a(30168),l=a(90325),n=a(11760),i=a(30686),s=a(83061),d=a(65188),o=a(1413),c=a(70885),m=a(47313),u=a(94715),h=a(17480),f=a(6473),x=a(32335),v=a(51474),b=a(69706),p=a.n(b),_=a(97241),g=a(88137),Z=a(14636),N=a(6085),w=a(73002),k=a(92241),j=a(32),y=a(57864),S=a(85700),C=a(46417),E="".concat(x.Z.PUBLIC_ASSETS,"img/"),B=f.Ry({username:f.Z_().email("Enter a valid email").required("Email is required"),first_name:f.Z_().required("Firstname is required"),last_name:f.Z_().required("Lastname is required"),mobile:f.Z_().required("Mobile number is required")}),q=(0,_.Z)((0,g.Z)({selectMenu:{paddingTop:"13px",paddingBottom:"13px",borderColor:"#e0e0e0",fontSize:"13px"},root:{width:"100%","MuiInputBase-formControl":{color:"red"}},formControl:{borderRadius:"8px"}}));function M(e){var t,a=e.modalHandler,r=(0,n.a)().userData,l=(0,m.useState)(null),i=(0,c.Z)(l,2),s=i[0],f=i[1],x=(0,m.useState)(!1),b=(0,c.Z)(x,2),_=b[0],g=b[1],M=(0,m.useState)(r.avatar?r.avatar:null),X=(0,c.Z)(M,2),F=X[0],T=X[1],P=(0,m.useState)(r.gender?r.gender:"other"),z=(0,c.Z)(P,2),Q=z[0],U=z[1],A=q(),H=(0,k.I0)(),I=(0,u.TA)({initialValues:{username:r.username,first_name:r.first_name,last_name:r.last_name,mobile:r.mobile,avatar:null===(t=r.avatar)||void 0===t?void 0:t.id,gender:Q},validationSchema:B,onSubmit:function(e,t){t.setFieldError,t.setSubmitting;var a=(0,o.Z)((0,o.Z)({},e),{},{avatar:F.id});console.log("sent value",a),L({values:a})}}),L=(0,d.bK)({url:"/my/profile/",dynamicValues:!0,method:"put",cb:{success:function(e,t){I.setSubmitting(!1),H(j.Z.auth.GetMe.success({data:e})),a()},error:function(e,t){I.setSubmitting(!1)}}}).fetchData;return(0,C.jsx)("div",{children:(0,C.jsxs)("form",{onSubmit:I.handleSubmit,children:[(0,C.jsx)("div",{className:"text-xl font-semibold mb-6",children:"Edit Profile"}),(0,C.jsxs)("div",{className:"flex-center-center mb-4",children:[(0,C.jsx)("div",{className:"mr-4",children:(0,C.jsx)(v.bA,{uploadMeta:s,setUploadMeta:f,cancelSending:_,setCancelSending:g,setFile:T})}),(0,C.jsxs)("div",{className:"user-avatar-box__display relative w-20 h-20 rounded-full overflow-hidden",children:[(0,C.jsx)("img",{src:p()((0,S.Ei)(F),"thumbnail_150")||"".concat(E,"chat-placeholder.png"),alt:"",className:"object-fit"}),null!==s&&(0,C.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-10 h-10 z-10",children:[(0,C.jsx)("div",{className:"upload-media-spinner",children:(0,C.jsx)(v.aN,{variant:"determinate",value:s})}),(0,C.jsx)("div",{onClick:function(){g(!0),f(null)},className:"absolute w-8 h-8 z-20 top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-3xl text-primary-dark hover:text-primary transition cursor-pointer",children:(0,C.jsx)(y.SV5,{})})]})]})]}),(0,C.jsx)(h.Qp,{name:"first_name",placeholder:"Enter you first name",label:"First name",required:!0,onChange:I.handleChange,value:I.values.first_name,error:I.touched.first_name&&Boolean(I.errors.first_name),helperText:I.touched.first_name&&I.errors.first_name}),(0,C.jsx)(h.Qp,{name:"last_name",placeholder:"Enter you last name",label:"Last name",required:!0,onChange:I.handleChange,value:I.values.last_name,error:I.touched.last_name&&Boolean(I.errors.last_name),helperText:I.touched.last_name&&I.errors.last_name}),(0,C.jsx)(h.Qp,{name:"username",placeholder:"Enter your email",label:"Email address",required:!0,onChange:I.handleChange,type:"email",value:I.values.username,error:I.touched.username&&Boolean(I.errors.username),helperText:I.touched.username&&I.errors.username}),(0,C.jsx)(h.Qp,{name:"mobile",placeholder:"Enter your mobile phone number",label:"Phone number",required:!0,type:"tel",onChange:I.handleChange,value:I.values.mobile,error:I.touched.mobile&&Boolean(I.errors.mobile),helperText:I.touched.mobile&&I.errors.mobile}),(0,C.jsx)("div",{className:"mb-4",children:(0,C.jsxs)(N.Z,{classes:{root:A.root},children:[(0,C.jsx)("p",{className:"ml-6 text-xs font-light text-kgrey-welcome mb-2 block",children:"Gender"}),(0,C.jsxs)(w.Z,{labelId:"Gender-select",id:"gender-select",value:Q,variant:"outlined",onChange:function(e){U(e.target.value),I.setFieldValue("gender",e.target.value)},autoWidth:!0,classes:{selectMenu:A.selectMenu,root:A.root},children:[(0,C.jsx)(Z.Z,{value:"OTHER",children:"Other"}),(0,C.jsx)(Z.Z,{value:"MALE",children:"Male"}),(0,C.jsx)(Z.Z,{value:"FEMALE",children:"Female"})]})]})}),(0,C.jsxs)("div",{className:"flex-center-between",children:[(0,C.jsx)("button",{disabled:I.isSubmitting,className:"uppercase bg-primary transition py-3.5 hover:bg-primary-dark text-white rounded-lg w-full text-center font-light text-sm",children:I.isSubmitting?"Updating. Please wait a while":"Update"}),(0,C.jsx)("button",{disabled:I.isSubmitting,className:"uppercase bg-primary transition py-3.5 hover:bg-primary-dark text-white rounded-lg w-full text-center font-light text-sm sm:hidden ml-2 sm:ml-0",type:"button",onClick:a,children:"Cancel"})]})]})})}var X,F=a(46225),T=a(90182),P=a(22539),z=a(1568);function Q(){var e,t=(0,n.a)().userData,a=(0,d.dF)(),o=a.open,c=a.modalHandler,m=a.WhiteModal,u=(0,d.gQ)("User Profile"),h=u.unreadCasesQuantity,f=u.isHidden;return(0,z.tZ)(l.d,{children:(0,z.BX)("div",{className:"profile",children:[(!f||0===h)&&(0,z.tZ)(T.q,{children:(0,z.tZ)("title",{children:"KENNEKT | User profile"})}),(0,z.BX)("div",{className:"profile__header w-full bg-user-profile rounded-xl h-40 text-white mb-20 p-4",children:[(0,z.tZ)("div",{className:"profile__header-heading font-medium text-2xl ",children:"Profile"}),(0,z.BX)("div",{className:"profile__header-info  mx-2 p-5  rounded-2xl relative shadow-xl overflow-hidden mt-12",children:[(0,z.tZ)("div",{className:"blurred absolute inset-0 backdrop-blur-sm bg-white/80 z-0 dark:bg-kdark/40"}),(0,z.tZ)("div",{className:"profile__header-info-inner relative z-10 flex items-center justify-between",children:(0,z.BX)("div",{className:"profile__header-user flex items-center",children:[(0,z.tZ)("div",{className:(0,s.Z)("profile__header-user-img w-20 h-20 rounded-2xl overflow-hidden shadow-xl flex-centered",{"bg-white":!t.avatar}),children:t.avatar?(0,z.tZ)("img",{src:null===(e=(0,S.Ei)(null===t||void 0===t?void 0:t.avatar))||void 0===e?void 0:e.thumbnail,alt:"Image",className:"object-fit h-full w-full"}):(0,z.tZ)("p",{className:"text-kgrey text-2xl",children:"".concat(t.first_name[0]).concat(t.last_name[0])})}),(0,z.tZ)("div",{className:"profile__header-user-name ml-5",children:(0,z.tZ)("div",{className:"font-semibold text-2xl text-kdark dark:text-white",children:"".concat(t.first_name," ").concat(t.last_name)})})]})})]})]}),(0,z.BX)("div",{className:"content",children:[(0,z.BX)("div",{className:"profile-info px-5 py-4 bg-white shadow-lg rounded-2xl dark:bg-kdark border border-transparent border-white/30",css:(0,i.iv)(X||(X=(0,r.Z)(["\n\t\t\t\t\t\t\twidth: ",";\n\t\t\t\t\t\t"])),F.tq?"100%":"428px"),children:[(0,z.BX)("div",{className:"profile-info__top flex-center-between border-b border-[#f0f0f0] pb-4",children:[(0,z.tZ)("div",{className:"font-semibold text-kdark dark:text-white",children:"Profile information"}),(0,z.tZ)("button",{className:"w-4 h-4 flex-centered text-[#67748E] hover:text-primary transition",type:"button",onClick:c,children:(0,z.tZ)(P.zmo,{})})]}),(0,z.BX)("div",{className:"profile-info__content py-4",children:[(0,z.tZ)(U,{field:"Full Name",value:"".concat(t.first_name," ").concat(t.last_name)}),(0,z.tZ)(U,{field:"Mobile",value:t.mobile}),(0,z.tZ)(U,{field:"Email",value:t.username})]})]}),(0,z.tZ)(m,{handleModalOpen:c,open:o,children:(0,z.tZ)(M,{modalHandler:c})})]})]})})}function U(e){var t=e.field,a=e.value;return(0,z.BX)("div",{className:"profile-info__item flex-center-y text-sm mb-4 font-medium",children:[(0,z.BX)("div",{className:"text-[#67748E]",children:[t,":"]}),(0,z.tZ)("div",{className:"text-kdark ml-2 dark:text-white",children:a})]})}var A=function(){return(0,z.tZ)(v.SV,{children:(0,z.tZ)(Q,{})})}}}]);